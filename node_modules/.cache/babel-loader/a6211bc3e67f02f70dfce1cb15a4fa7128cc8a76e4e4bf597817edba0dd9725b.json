{"ast":null,"code":"import _classCallCheck from\"D:/dev/movies/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/dev/movies/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(options){var _this=this;_classCallCheck(this,MainApi);this.getProfile=function(){return fetch(\"\".concat(_this._baseUrl,\"/users/me\"),{method:\"GET\",headers:_this._headers,credentials:\"include\"}).then(function(res){return _this._getResponseData(res);});};this.register=function(name,password,email){return fetch(\"\".concat(_this._baseUrl,\"/signup\"),{method:\"POST\",headers:_this._headers,credentials:\"include\",body:JSON.stringify({name:name,password:password,email:email})}).then(function(res){return _this._getResponseData(res);});};this.login=function(password,email){return fetch(\"\".concat(_this._baseUrl,\"/signin\"),{method:\"POST\",headers:_this._headers,credentials:\"include\",body:JSON.stringify({password:password,email:email})}).then(function(res){return _this._getResponseData(res);});};this.getMovies=function(){return fetch(\"\".concat(_this._baseUrl,\"/movies\"),{method:\"GET\",headers:_this._headers,credentials:\"include\"}).then(function(res){return _this._getResponseData(res);});};this.clearCookie=function(){return fetch(\"\".concat(_this._baseUrl,\"/signout\"),{method:\"POST\",credentials:\"include\",headers:_this._headers}).then(function(res){return _this._getResponseData(res);});};this.patchProfile=function(name,email){return fetch(\"\".concat(_this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:_this._headers,credentials:\"include\",body:JSON.stringify({name:name,email:email})}).then(function(res){return _this._getResponseData(res);});};this.DeleteMovie=function(movieId){return fetch(\"\".concat(_this._baseUrl,\"/movies/\").concat(movieId),{method:\"Delete\",credentials:\"include\",headers:_this._headers}).then(function(res){return _this._getResponseData(res);});};this.addToFavorite=function(country,director,duration,year,description,image,thumbnail,trailerLink,owner,movieId,nameRU,nameEN){return fetch(\"\".concat(_this._baseUrl,\"/movies\"),{method:\"POST\",headers:_this._headers,credentials:\"include\",body:JSON.stringify({country:country,director:director,duration:duration,year:year,description:description,image:image,thumbnail:thumbnail,trailerLink:trailerLink,owner:owner,movieId:movieId,nameRU:nameRU,nameEN:nameEN})}).then(function(res){return _this._getResponseData(res);});};this._baseUrl=options.baseUrl;this._headers=options.headers;}_createClass(MainApi,[{key:\"_getResponseData\",value:function _getResponseData(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}}]);return MainApi;}();export{MainApi as default};export var api=new MainApi({baseUrl:\"moviesbackend.nomoredomains.work\",headers:{\"Content-Type\":\"application/json\"}});","map":{"version":3,"names":["MainApi","options","getProfile","fetch","_baseUrl","method","headers","_headers","credentials","then","res","_getResponseData","register","name","password","email","body","JSON","stringify","login","getMovies","clearCookie","patchProfile","DeleteMovie","movieId","addToFavorite","country","director","duration","year","description","image","thumbnail","trailerLink","owner","nameRU","nameEN","baseUrl","ok","Promise","reject","status","json","api"],"sources":["D:/dev/movies/frontend/src/utils/MainApi.js"],"sourcesContent":["export default class MainApi {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  getProfile = () => {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  register = (name, password, email) => {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n      body: JSON.stringify({ name, password, email }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  login = (password, email) => {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n      body: JSON.stringify({ password, email }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  getMovies = () => {\r\n    return fetch(`${this._baseUrl}/movies`, {\r\n      method: `GET`,\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  clearCookie = () => {\r\n    return fetch(`${this._baseUrl}/signout`, {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: this._headers,\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  patchProfile = (name, email) => {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n      body: JSON.stringify({\r\n        name: name,\r\n        email: email,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  DeleteMovie = (movieId) => {\r\n    return fetch(`${this._baseUrl}/movies/${movieId}`, {\r\n      method: \"Delete\",\r\n      credentials: \"include\",\r\n      headers: this._headers,\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  addToFavorite = (\r\n    country,\r\n    director,\r\n    duration,\r\n    year,\r\n    description,\r\n    image,\r\n    thumbnail,\r\n    trailerLink,\r\n    owner,\r\n    movieId,\r\n    nameRU,\r\n    nameEN\r\n  ) => {\r\n    return fetch(`${this._baseUrl}/movies`, {\r\n      method: `POST`,\r\n      headers: this._headers,\r\n      credentials: \"include\",\r\n      body: JSON.stringify({\r\n        country,\r\n        director,\r\n        duration,\r\n        year,\r\n        description,\r\n        image,\r\n        thumbnail,\r\n        trailerLink,\r\n        owner,\r\n        movieId,\r\n        nameRU,\r\n        nameEN,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n}\r\n\r\nexport const api = new MainApi({\r\n  baseUrl: \"moviesbackend.nomoredomains.work\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}