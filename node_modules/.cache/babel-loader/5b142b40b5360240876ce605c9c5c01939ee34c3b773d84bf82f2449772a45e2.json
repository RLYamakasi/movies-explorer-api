{"ast":null,"code":"import _slicedToArray from\"D:/dev/movies/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import './index.css';\nimport Main from\"../components/Main\";import Films from\"../components/Films\";import SavedFilms from\"../components/SavedFilms\";import Registration from\"../components/Registration\";import Login from\"../components/Login\";import Error from\"../components/Error\";import Account from\"../components/Account\";import ProtectedRoute from\"../components/ProtectedRoute\";import{React,useEffect,useState}from\"react\";import{Routes,Route,Redirect,useNavigate}from\"react-router-dom\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setСurrentUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),movies=_useState6[0],setMovies=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),savedMovies=_useState8[0],setSavedMovies=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isSideBarOpen=_useState10[0],setSideBarOpen=_useState10[1];var _useState11=useState(localStorage.getItem(\"isShort\")===\"true\"),_useState12=_slicedToArray(_useState11,2),isShortFilms=_useState12[0],setShortFilms=_useState12[1];var _useState13=useState(localStorage.getItem(\"isShortSaved\")===\"true\"),_useState14=_slicedToArray(_useState13,2),isShortSavedFilms=_useState14[0],setShortSavedFilms=_useState14[1];// const [isShortSavedFilms, ShortSavedFilms] = useState(\n//   localStorage.getItem(\"isShortFavorite\") === \"true\"\n// );\nuseEffect(function(){if(window.screen.availWidth<=1024){isSideBarOpen(true);}setShortFilms(localStorage.getItem(\"isShort\")===\"true\");if(localStorage.getItem(\"isShort\")===\"true\"){shortFilms();}else{localStorage.setItem(\"isShort\",true);SearchFilter();}},[]);var shortFilms=function shortFilms(){if(isShortFilms===true){setShortFilms(false);localStorage.setItem(\"isShort\",isShortFilms);SearchFilter();}else{setShortFilms(true);localStorage.setItem(\"isShort\",isShortFilms);SearchFilter();}};var SearchSavedFilter=function SearchSavedFilter(){if(JSON.parse(localStorage.getItem(\"SearchFilm\"))===null){if(isShortSavedFilms){setSavedMovies(JSON.parse(localStorage.getItem(\"FavoriteMovie\")));}else{setSavedMovies(JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(function(item){return item.duration<=40;}));}}else{if(isShortSavedFilms){setSavedMovies(JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(function(item){return item.id===JSON.parse(localStorage.getItem(\"SearchFilm\")).id;}));}else{setSavedMovies(JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(function(item){return item===[JSON.parse(localStorage.getItem(\"SearchFilm\"))]&&item.duration<=40;}));}}};var SearchFilter=function SearchFilter(){if(JSON.parse(localStorage.getItem(\"SearchFilm\"))===null){if(isShortFilms){setMovies(JSON.parse(localStorage.getItem(\"AllFilms\")));}else{setMovies(JSON.parse(localStorage.getItem(\"ShortFilms\")));}}else{if(isShortFilms){setMovies([JSON.parse(localStorage.getItem(\"SearchFilm\"))]);}else{setMovies([JSON.parse(localStorage.getItem(\"SearchFilm\"))].filter(function(item){return item.duration<=40;}));}}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",lang:\"ru\",children:/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Main,{loggedIn:loggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Registration,{setСurrentUser:setСurrentUser,setMovies:setMovies,setLoggedIn:setLoggedIn,setSavedMovies:setSavedMovies})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(Login,{setShortFilms:setShortFilms,SearchFilter:SearchFilter,setСurrentUser:setСurrentUser,movies:movies,setMovies:setMovies,setLoggedIn:setLoggedIn,savedMovies:savedMovies,setSavedMovies:setSavedMovies})}),/*#__PURE__*/_jsx(Route,{path:\"/error\",element:/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/movies\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(Films,{shortFilms:shortFilms,setShortFilms:setShortFilms,isShortFilms:isShortFilms,SearchFilter:SearchFilter,setSavedMovies:setSavedMovies,setMovies:setMovies// movies2={movies}\n,movies:movies,savedMovies:savedMovies}),loggedIn:loggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/saved-movies\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(SavedFilms,{setShortSavedFilms:setShortSavedFilms,isShortSavedFilms:isShortSavedFilms,SearchSavedFilter:SearchSavedFilter,setSavedMovies:setSavedMovies,savedMovies:savedMovies}),loggedIn:loggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(Account,{setLoggedIn:setLoggedIn,setСurrentUser:setСurrentUser}),loggedIn:loggedIn})})]})})});}export default App;","map":{"version":3,"names":["Main","Films","SavedFilms","Registration","Login","Error","Account","ProtectedRoute","React","useEffect","useState","Routes","Route","Redirect","useNavigate","CurrentUserContext","App","loggedIn","setLoggedIn","currentUser","setСurrentUser","movies","setMovies","savedMovies","setSavedMovies","isSideBarOpen","setSideBarOpen","localStorage","getItem","isShortFilms","setShortFilms","isShortSavedFilms","setShortSavedFilms","window","screen","availWidth","shortFilms","setItem","SearchFilter","SearchSavedFilter","JSON","parse","filter","item","duration","id"],"sources":["D:/dev/movies/frontend/src/app/App.js"],"sourcesContent":["// import './index.css';\nimport Main from \"../components/Main\";\nimport Films from \"../components/Films\";\nimport SavedFilms from \"../components/SavedFilms\";\nimport Registration from \"../components/Registration\";\nimport Login from \"../components/Login\";\nimport Error from \"../components/Error\";\nimport Account from \"../components/Account\";\nimport ProtectedRoute from \"../components/ProtectedRoute\";\nimport { React, useEffect, useState } from \"react\";\nimport { Routes, Route, Redirect, useNavigate } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUser, setСurrentUser] = useState([]);\n  const [movies, setMovies] = useState([]);\n  const [savedMovies, setSavedMovies] = useState([]);\n  const [isSideBarOpen, setSideBarOpen] = useState(false);\n  const [isShortFilms, setShortFilms] = useState(\n    localStorage.getItem(\"isShort\") === \"true\"\n  );\n  const [isShortSavedFilms, setShortSavedFilms] = useState(\n    localStorage.getItem(\"isShortSaved\") === \"true\"\n  );\n  // const [isShortSavedFilms, ShortSavedFilms] = useState(\n  //   localStorage.getItem(\"isShortFavorite\") === \"true\"\n  // );\n\n  useEffect(() => {\n    if (window.screen.availWidth <= 1024) {\n      isSideBarOpen(true);\n    }\n    setShortFilms(localStorage.getItem(\"isShort\") === \"true\");\n    if (localStorage.getItem(\"isShort\") === \"true\") {\n      shortFilms();\n    } else {\n      localStorage.setItem(\"isShort\", true);\n      SearchFilter();\n    }\n  }, []);\n\n  const shortFilms = () => {\n    if (isShortFilms === true) {\n      setShortFilms(false);\n      localStorage.setItem(\"isShort\", isShortFilms);\n      SearchFilter();\n    } else {\n      setShortFilms(true);\n      localStorage.setItem(\"isShort\", isShortFilms);\n      SearchFilter();\n    }\n  };\n\n  const SearchSavedFilter = () => {\n    if (JSON.parse(localStorage.getItem(\"SearchFilm\")) === null) {\n      if (isShortSavedFilms) {\n        setSavedMovies(JSON.parse(localStorage.getItem(\"FavoriteMovie\")));\n      } else {\n        setSavedMovies(\n          JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(\n            (item) => item.duration <= 40\n          )\n        );\n      }\n    } else {\n      if (isShortSavedFilms) {\n        setSavedMovies(\n          JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(\n            (item) =>\n              item.id === JSON.parse(localStorage.getItem(\"SearchFilm\")).id\n          )\n        );\n      } else {\n        setSavedMovies(\n          JSON.parse(localStorage.getItem(\"FavoriteMovie\")).filter(\n            (item) =>\n              item === [JSON.parse(localStorage.getItem(\"SearchFilm\"))] &&\n              item.duration <= 40\n          )\n        );\n      }\n    }\n  };\n\n  const SearchFilter = () => {\n    if (JSON.parse(localStorage.getItem(\"SearchFilm\")) === null) {\n      if (isShortFilms) {\n        setMovies(JSON.parse(localStorage.getItem(\"AllFilms\")));\n      } else {\n        setMovies(JSON.parse(localStorage.getItem(\"ShortFilms\")));\n      }\n    } else {\n      if (isShortFilms) {\n        setMovies([JSON.parse(localStorage.getItem(\"SearchFilm\"))]);\n      } else {\n        setMovies(\n          [JSON.parse(localStorage.getItem(\"SearchFilm\"))].filter(\n            (item) => item.duration <= 40\n          )\n        );\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\" lang=\"ru\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Routes>\n          <Route path=\"/\" element={<Main loggedIn={loggedIn} />}></Route>\n          <Route\n            path=\"/signup\"\n            element={\n              <Registration\n                setСurrentUser={setСurrentUser}\n                setMovies={setMovies}\n                setLoggedIn={setLoggedIn}\n                setSavedMovies={setSavedMovies}\n              />\n            }\n          ></Route>\n          <Route\n            path=\"/signin\"\n            element={\n              <Login\n                setShortFilms={setShortFilms}\n                SearchFilter={SearchFilter}\n                setСurrentUser={setСurrentUser}\n                movies={movies}\n                setMovies={setMovies}\n                setLoggedIn={setLoggedIn}\n                savedMovies={savedMovies}\n                setSavedMovies={setSavedMovies}\n              />\n            }\n          ></Route>\n          <Route path=\"/error\" element={<Error />}></Route>\n          <Route\n            path=\"/movies\"\n            element={\n              <ProtectedRoute\n                element={\n                  <Films\n                    shortFilms={shortFilms}\n                    setShortFilms={setShortFilms}\n                    isShortFilms={isShortFilms}\n                    SearchFilter={SearchFilter}\n                    setSavedMovies={setSavedMovies}\n                    setMovies={setMovies}\n                    // movies2={movies}\n                    movies={movies}\n                    savedMovies={savedMovies}\n                  />\n                }\n                loggedIn={loggedIn}\n              />\n            }\n          ></Route>\n          <Route\n            path=\"/saved-movies\"\n            element={\n              <ProtectedRoute\n                element={\n                  <SavedFilms\n                    setShortSavedFilms={setShortSavedFilms}\n                    isShortSavedFilms={isShortSavedFilms}\n                    SearchSavedFilter={SearchSavedFilter}\n                    setSavedMovies={setSavedMovies}\n                    savedMovies={savedMovies}\n                  />\n                }\n                loggedIn={loggedIn}\n              />\n            }\n          ></Route>\n          <Route\n            path=\"/profile\"\n            element={\n              <ProtectedRoute\n                element={\n                  <Account\n                    setLoggedIn={setLoggedIn}\n                    setСurrentUser={setСurrentUser}\n                  />\n                }\n                loggedIn={loggedIn}\n              />\n            }\n          ></Route>\n        </Routes>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}